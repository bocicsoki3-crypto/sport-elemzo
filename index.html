<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <title>The King AI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <?!= include('style'); ?>
</head>
<body>
    <div class="top-bar">
        <div class="logo">
            <span class="logo-text">The King AI</span>
        </div>
        <div class="main-nav">
            <label for="sport-select" class="sr-only">Válassz Sportágat</label>
            <div class="select-wrapper">
                <select id="sport-select" onchange="google.script.run.withSuccessHandler(renderDashboard).getMatches(this.value)">
                    <option value="all">Összes Sportág</option>
                    <option value="soccer">Foci</option>
                    <option value="basketball">Kosárlabda</option>
                    <option value="tennis">Tenisz</option>
                </select>
            </div>
            <button class="nav-button active" onclick="loadContent('dashboard')">Meccsek Betöltése</button>
            <button class="nav-button" onclick="loadContent('results')">Eredmények</button>
            <button class="nav-button" onclick="loadContent('log')">Kötél Megnyitása</button>
        </div>
        <div class="user-profile">
            <i class="fas fa-sun toggle-theme" onclick="toggleTheme()"></i>
            <span class="user-status">Csatlakoztatva</span>
        </div>
    </div>

    <div class="container">
        <div id="dashboard" class="content-section active">
            <div class="kanban-board">
                <div class="kanban-column">
                    <div class="column-header">
                        <h3>Prémium Elemzés</h3>
                    </div>
                    <div class="cards-container" id="premium-analysis-column">
                        </div>
                </div>

                <div class="kanban-column">
                    <div class="column-header">
                        <h3>Stabil Ligák</h3>
                    </div>
                    <div class="cards-container" id="stable-leagues-column">
                        <div class="no-matches">Nincs meccs ebben a kategóriában.</div>
                    </div>
                </div>

                <div class="kanban-column">
                    <div class="column-header">
                        <h3>Változékony Mezőny</h3>
                    </div>
                    <div class="cards-container" id="volatile-leagues-column">
                        </div>
                </div>

                <div class="kanban-column">
                    <div class="column-header">
                        <h3>Vödör Kártyák</h3>
                    </div>
                    <div class="cards-container" id="bucket-cards-column">
                        </div>
                </div>
            </div>
        </div>

        <div id="analysis-view" class="content-section">
            <button class="back-button" onclick="showDashboard()"><i class="fas fa-arrow-left"></i> Vissza</button>
            <div id="analysis-content">
                </div>
        </div>

        <div id="results" class="content-section">
            <h2>Eredmények</h2>
            <p>Itt lesznek az eredmények.</p>
        </div>

        <div id="log" class="content-section">
            <h2>Fogadási Napló</h2>
            <div id="bet-log-container">
                <p>Nincs még naplózott fogadás.</p>
            </div>
        </div>
    </div>

    <?!= include('javascript'); ?>
    <script>
        // Initial load
        document.addEventListener('DOMContentLoaded', () => {
            google.script.run.withSuccessHandler(renderDashboard).getMatches('all');
            loadTheme();
            renderBetLog(); // Render the bet log on load
        });
    </script>
</body>
</html>
